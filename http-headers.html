<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Azure Container Registry HTTP headers | Azure Container Registry</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="">
    
    <link rel="preload" href="/acr/assets/css/0.styles.141b3060.css" as="style"><link rel="preload" href="/acr/assets/js/app.8af8dec3.js" as="script"><link rel="preload" href="/acr/assets/js/2.f86faad7.js" as="script"><link rel="preload" href="/acr/assets/js/21.39ae3273.js" as="script"><link rel="prefetch" href="/acr/assets/js/10.57bcffaa.js"><link rel="prefetch" href="/acr/assets/js/11.d70faeba.js"><link rel="prefetch" href="/acr/assets/js/12.21fd10c0.js"><link rel="prefetch" href="/acr/assets/js/13.7c48beb6.js"><link rel="prefetch" href="/acr/assets/js/14.2df334c1.js"><link rel="prefetch" href="/acr/assets/js/15.d2d3bd05.js"><link rel="prefetch" href="/acr/assets/js/16.83754447.js"><link rel="prefetch" href="/acr/assets/js/17.532f23a0.js"><link rel="prefetch" href="/acr/assets/js/18.a76e8f7c.js"><link rel="prefetch" href="/acr/assets/js/19.5768f810.js"><link rel="prefetch" href="/acr/assets/js/20.ab152cd6.js"><link rel="prefetch" href="/acr/assets/js/22.e112ad54.js"><link rel="prefetch" href="/acr/assets/js/23.c753305d.js"><link rel="prefetch" href="/acr/assets/js/24.6a571862.js"><link rel="prefetch" href="/acr/assets/js/25.e3748106.js"><link rel="prefetch" href="/acr/assets/js/26.3c2e1ed6.js"><link rel="prefetch" href="/acr/assets/js/27.69f0c3fe.js"><link rel="prefetch" href="/acr/assets/js/28.a9c9745b.js"><link rel="prefetch" href="/acr/assets/js/29.0580cb25.js"><link rel="prefetch" href="/acr/assets/js/3.e0486cc8.js"><link rel="prefetch" href="/acr/assets/js/30.789339f0.js"><link rel="prefetch" href="/acr/assets/js/31.ac7460c2.js"><link rel="prefetch" href="/acr/assets/js/32.cccb17c6.js"><link rel="prefetch" href="/acr/assets/js/33.c276ba67.js"><link rel="prefetch" href="/acr/assets/js/34.278f0e8f.js"><link rel="prefetch" href="/acr/assets/js/35.8a7cb580.js"><link rel="prefetch" href="/acr/assets/js/36.3eb07688.js"><link rel="prefetch" href="/acr/assets/js/37.5d7ff385.js"><link rel="prefetch" href="/acr/assets/js/38.35e36b4f.js"><link rel="prefetch" href="/acr/assets/js/39.f8764d22.js"><link rel="prefetch" href="/acr/assets/js/4.8afd7a30.js"><link rel="prefetch" href="/acr/assets/js/40.58758a47.js"><link rel="prefetch" href="/acr/assets/js/41.c5cdf429.js"><link rel="prefetch" href="/acr/assets/js/42.132a6a36.js"><link rel="prefetch" href="/acr/assets/js/43.2348c5ac.js"><link rel="prefetch" href="/acr/assets/js/44.b256bf82.js"><link rel="prefetch" href="/acr/assets/js/45.91177548.js"><link rel="prefetch" href="/acr/assets/js/46.ef372030.js"><link rel="prefetch" href="/acr/assets/js/47.2df2bbed.js"><link rel="prefetch" href="/acr/assets/js/48.2501e4d2.js"><link rel="prefetch" href="/acr/assets/js/49.608bc551.js"><link rel="prefetch" href="/acr/assets/js/5.2f834d0b.js"><link rel="prefetch" href="/acr/assets/js/6.d3786eb9.js"><link rel="prefetch" href="/acr/assets/js/7.d373db68.js"><link rel="prefetch" href="/acr/assets/js/8.830cfc3e.js"><link rel="prefetch" href="/acr/assets/js/9.c8fd7778.js">
    <link rel="stylesheet" href="/acr/assets/css/0.styles.141b3060.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/acr/" class="home-link router-link-active"><img src="/acr/files/acr.svg" alt="Azure Container Registry" class="logo"> <span class="site-name can-hide">Azure Container Registry</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"> <a href="https://github.com/azure/acr" target="_blank" rel="noopener noreferrer" class="repo-link">
    Star this Repo
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/azure/acr" target="_blank" rel="noopener noreferrer" class="repo-link">
    Star this Repo
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/acr/" aria-current="page" class="sidebar-link">Overview</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/acr/#overview" class="sidebar-link">Overview</a></li><li class="sidebar-sub-header"><a href="/acr/#blog-posts" class="sidebar-link">Blog posts</a></li><li class="sidebar-sub-header"><a href="/acr/#links" class="sidebar-link">Links</a></li></ul></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Teleport</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Tasks</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Authentication</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Integration</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="azure-container-registry-http-headers"><a href="#azure-container-registry-http-headers" class="header-anchor">#</a> Azure Container Registry HTTP headers</h1> <p>Azure container registries are compatible with a multitude of services and orchestrators. To help our customers, we'd like to understand which services in Azure, or outside of Azure, are issuing registry requests. To track the source services and agents from which ACR is used, we have started using the <code>HttpHeaders</code> field in the Docker <code>config.json</code> file.</p> <h2 id="header-format"><a href="#header-format" class="header-anchor">#</a> Header format</h2> <p>ACR will parse headers using the following format:</p> <div class="language-HTTP line-numbers-mode"><pre class="language-http"><code><span class="token header-name keyword">X-Meta-Source-Client:</span> &lt;cloud&gt;/&lt;service&gt;/&lt;optionalservicename&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li><code>cloud</code>: Azure, Azure Stack, or other government- or country-specific Azure cloud.</li> <li><code>service</code>: The name of the service.</li> <li><code>optionalservicename</code>: An optional parameter for services with subservices, or for specifying a SKU. For example, Web Apps corresponds to <code>azure/app-service/web-apps</code>. The servicename can also be a hierarchy path, for example <code>azure/acr/connected-registry/instance-1</code>.</li></ul> <h3 id="example"><a href="#example" class="header-anchor">#</a> Example</h3> <div class="language-JSON line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
	<span class="token property">&quot;HttpHeaders&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token property">&quot;X-Meta-Source-Client&quot;</span><span class="token operator">:</span> <span class="token string">&quot;azure/aks&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token property">&quot;auths&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token property">&quot;myregistry.azurecr.io&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token property">&quot;credsStore&quot;</span><span class="token operator">:</span> <span class="token string">&quot;wincred&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="header-values"><a href="#header-values" class="header-anchor">#</a> Header values</h2> <p>Partner services and orchestrators are encouraged to use specific header values to help with our telemetry. Users can also modify the value passed to the header if they so desire.</p> <p>The values we ask ACR partners to use when populating the <code>X-Meta-Source-Client</code> field are:</p> <table><thead><tr><th>Cloud</th> <th>Header</th></tr></thead> <tbody><tr><td>Azure Public Cloud</td> <td><code>azure/</code></td></tr> <tr><td>Azure Stack</td> <td><code>azurestack/</code></td></tr> <tr><td>China (Mooncake)</td> <td><code>china/</code></td></tr> <tr><td>Germany</td> <td><code>germany/</code></td></tr> <tr><td>US DOD</td> <td><code>azureusdod/</code></td></tr> <tr><td>US Gov</td> <td><code>azureusgov/</code></td></tr> <tr><td>On Premise</td> <td><code>on-prem/</code></td></tr></tbody></table> <table><thead><tr><th>Service or Orchestrator name</th> <th>Header</th></tr></thead> <tbody><tr><td>App Service - Logic Apps</td> <td><code>azure/app-service/logic-apps</code></td></tr> <tr><td>App Service - Web Apps</td> <td><code>azure/app-service/web-apps</code></td></tr> <tr><td>Azure Container Builder</td> <td><code>azure/acb</code></td></tr> <tr><td>Azure Container Instance</td> <td><code>azure/aci</code></td></tr> <tr><td>Azure Container Service</td> <td><code>azure/acs</code></td></tr> <tr><td>Azure Kubernetes Service</td> <td><code>azure/aks</code></td></tr> <tr><td>AKS Engine (Kubernetes)</td> <td><code>azure/aks-engine</code></td></tr> <tr><td>Cluster API Azure (Kubernetes)</td> <td><code>azure/capz</code></td></tr> <tr><td>Batch</td> <td><code>azure/batch</code></td></tr> <tr><td>Cloud Console</td> <td><code>azure/cloud-console</code></td></tr> <tr><td>Functions</td> <td><code>azure/functions</code></td></tr> <tr><td>HDInsight</td> <td><code>azure/hdinsight</code></td></tr> <tr><td>Internet of Things - Hub</td> <td><code>azure/iot/hub</code></td></tr> <tr><td>Jenkins</td> <td><code>azure/jenkins</code></td></tr> <tr><td>Machine Learning</td> <td><code>azure/ml</code></td></tr> <tr><td>Service Fabric</td> <td><code>azure/service-fabric</code></td></tr> <tr><td>VSTS</td> <td><code>azure/vsts</code></td></tr> <tr><td>ACR Tasks</td> <td><code>azure/acr/tasks</code></td></tr> <tr><td>ACR Connected Registry</td> <td><code>azure/acr/connected-registry/instance-1</code></td></tr></tbody></table></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/azure/acr/edit/master/docs/http-headers.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/acr/assets/js/app.8af8dec3.js" defer></script><script src="/acr/assets/js/2.f86faad7.js" defer></script><script src="/acr/assets/js/21.39ae3273.js" defer></script>
  </body>
</html>
