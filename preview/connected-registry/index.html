<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ACR connected registry (Private Preview) instructions | Azure Container Registry</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="">
    
    <link rel="preload" href="/acr/assets/css/0.styles.141b3060.css" as="style"><link rel="preload" href="/acr/assets/js/app.8af8dec3.js" as="script"><link rel="preload" href="/acr/assets/js/2.f86faad7.js" as="script"><link rel="preload" href="/acr/assets/js/27.69f0c3fe.js" as="script"><link rel="prefetch" href="/acr/assets/js/10.57bcffaa.js"><link rel="prefetch" href="/acr/assets/js/11.d70faeba.js"><link rel="prefetch" href="/acr/assets/js/12.21fd10c0.js"><link rel="prefetch" href="/acr/assets/js/13.7c48beb6.js"><link rel="prefetch" href="/acr/assets/js/14.2df334c1.js"><link rel="prefetch" href="/acr/assets/js/15.d2d3bd05.js"><link rel="prefetch" href="/acr/assets/js/16.83754447.js"><link rel="prefetch" href="/acr/assets/js/17.532f23a0.js"><link rel="prefetch" href="/acr/assets/js/18.a76e8f7c.js"><link rel="prefetch" href="/acr/assets/js/19.5768f810.js"><link rel="prefetch" href="/acr/assets/js/20.ab152cd6.js"><link rel="prefetch" href="/acr/assets/js/21.39ae3273.js"><link rel="prefetch" href="/acr/assets/js/22.e112ad54.js"><link rel="prefetch" href="/acr/assets/js/23.c753305d.js"><link rel="prefetch" href="/acr/assets/js/24.6a571862.js"><link rel="prefetch" href="/acr/assets/js/25.e3748106.js"><link rel="prefetch" href="/acr/assets/js/26.3c2e1ed6.js"><link rel="prefetch" href="/acr/assets/js/28.a9c9745b.js"><link rel="prefetch" href="/acr/assets/js/29.0580cb25.js"><link rel="prefetch" href="/acr/assets/js/3.e0486cc8.js"><link rel="prefetch" href="/acr/assets/js/30.789339f0.js"><link rel="prefetch" href="/acr/assets/js/31.ac7460c2.js"><link rel="prefetch" href="/acr/assets/js/32.cccb17c6.js"><link rel="prefetch" href="/acr/assets/js/33.c276ba67.js"><link rel="prefetch" href="/acr/assets/js/34.278f0e8f.js"><link rel="prefetch" href="/acr/assets/js/35.8a7cb580.js"><link rel="prefetch" href="/acr/assets/js/36.3eb07688.js"><link rel="prefetch" href="/acr/assets/js/37.5d7ff385.js"><link rel="prefetch" href="/acr/assets/js/38.35e36b4f.js"><link rel="prefetch" href="/acr/assets/js/39.f8764d22.js"><link rel="prefetch" href="/acr/assets/js/4.8afd7a30.js"><link rel="prefetch" href="/acr/assets/js/40.58758a47.js"><link rel="prefetch" href="/acr/assets/js/41.c5cdf429.js"><link rel="prefetch" href="/acr/assets/js/42.132a6a36.js"><link rel="prefetch" href="/acr/assets/js/43.2348c5ac.js"><link rel="prefetch" href="/acr/assets/js/44.b256bf82.js"><link rel="prefetch" href="/acr/assets/js/45.91177548.js"><link rel="prefetch" href="/acr/assets/js/46.ef372030.js"><link rel="prefetch" href="/acr/assets/js/47.2df2bbed.js"><link rel="prefetch" href="/acr/assets/js/48.2501e4d2.js"><link rel="prefetch" href="/acr/assets/js/49.608bc551.js"><link rel="prefetch" href="/acr/assets/js/5.2f834d0b.js"><link rel="prefetch" href="/acr/assets/js/6.d3786eb9.js"><link rel="prefetch" href="/acr/assets/js/7.d373db68.js"><link rel="prefetch" href="/acr/assets/js/8.830cfc3e.js"><link rel="prefetch" href="/acr/assets/js/9.c8fd7778.js">
    <link rel="stylesheet" href="/acr/assets/css/0.styles.141b3060.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/acr/" class="home-link router-link-active"><img src="/acr/files/acr.svg" alt="Azure Container Registry" class="logo"> <span class="site-name can-hide">Azure Container Registry</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"> <a href="https://github.com/azure/acr" target="_blank" rel="noopener noreferrer" class="repo-link">
    Star this Repo
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/azure/acr" target="_blank" rel="noopener noreferrer" class="repo-link">
    Star this Repo
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/acr/" aria-current="page" class="sidebar-link">Overview</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/acr/#overview" class="sidebar-link">Overview</a></li><li class="sidebar-sub-header"><a href="/acr/#blog-posts" class="sidebar-link">Blog posts</a></li><li class="sidebar-sub-header"><a href="/acr/#links" class="sidebar-link">Links</a></li></ul></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Teleport</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Tasks</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Authentication</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Integration</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="acr-connected-registry-private-preview-instructions"><a href="#acr-connected-registry-private-preview-instructions" class="header-anchor">#</a> ACR connected registry (Private Preview) instructions</h1> <p>This article provides guidance for use of the connected registry feature of Azure Container Registry (ACR) during the limited preview.</p> <p>To request preview access, submit your contact details using this <a href="https://forms.office.com/Pages/ResponsePage.aspx?id=v4j5cvGGr0GRqy180BHbR1OsLxas9SdIhfyFenqqkolUMkFKMTdDSU45SFQzU0o0WUNROVAySkRINy4u" target="_blank" rel="noopener noreferrer">form<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> and we will get in touch with you.</p> <h2 id="available-regions"><a href="#available-regions" class="header-anchor">#</a> Available Regions</h2> <p>During limited preview period, the connected registry functionality is available in dedicated stamps in the following Azure regions:</p> <ul><li>Asia East</li> <li>EU West</li> <li>US East</li></ul> <p>To use the connected registry functionality, your ACR must be deployed in one of the above three regions and in a supported deployment stamp. To check the stamp where your ACR is deployed to, use the following command:</p> <div class="language-azurecli line-numbers-mode"><pre class="language-text"><code>nslookup &lt;your_registry_name&gt;.azurecr.io
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>The stamp name is one of the aliases returned by the above command. Currently, connected registries are supported in the following stamps:</p> <ul><li>East Asia: <code>ea-1.fe.azcr.io</code></li> <li>EU West: <code>weu-3.fe.azcr.io</code></li> <li>East US: <code>eus-2.fe.azcr.io</code></li></ul> <blockquote><p><strong>IMPORTANT</strong>
If your ACR doesn't have the above alias respective to your region, the connected registry functionality will not be available. You can create an issue as described below, and we will migrate your registry to the correct stamp.</p></blockquote> <h2 id="known-limitations"><a href="#known-limitations" class="header-anchor">#</a> Known Limitations</h2> <p>Here is a list of known limitations for the connected registry functionality in limited preview:</p> <ul><li>Nested connected registry mode is still under development and requires additional testing. Currently nested registries are blocked and will be released in a few weeks.</li> <li>Number of tokens and scopemaps is limited to 20K for a single ACR. This indirectly limits the number of connected registries for an ACR registry because every connected registry needs a sync and client token.</li> <li>Number of repository permissions in a scope map is limited to 500.</li> <li>Number of clients for the connected registry is currently limited to 20.</li> <li>Image locking through repository/manifest/tag metadata is not currently supported for connected registries.</li> <li>Repository delete is not supported on the connected registry using registry mode.</li> <li>Audit logs for connected registries are currently not supported.</li> <li>Garbage collection of deleted artifacts on connected registries is currently not supported.</li> <li>Connected registry is coupled with home region data endpoint and its automatic migration for geo replications is not supported.</li> <li>Deletion of a connected registry needs manual removal of the containers on premises as well as removal of the respective scope map or tokens in the cloud.</li> <li>Connected registry sync limitations are as follows:
<ul><li>For continuous sync:
<ul><li><code>minMessageTtl</code> is 1 day</li> <li><code>maxMessageTtl</code> is 90 days</li></ul></li> <li>For occasionally connected scenarios, where you want to specify sync window:
<ul><li><code>minSyncWindow</code> is 1 hr</li> <li><code>maxSyncWindow</code> is 7 days</li></ul></li></ul></li></ul> <h2 id="set-up-and-configuration"><a href="#set-up-and-configuration" class="header-anchor">#</a> Set Up and Configuration</h2> <p>In limited preview, the connected registry targets IoT scenarios. Below are links to the preliminary documentation you can use to set up and configure the connected registry with your IoT Edge infrastructure.</p> <ul><li><a href="/acr/preview/connected-registry/intro-connected-registry.html">Overview of connected registry</a></li> <li><a href="/acr/preview/connected-registry/overview-connected-registry-access.html">Understand access to a connected registry</a></li> <li><a href="/acr/preview/connected-registry/overview-connected-registry-and-iot-edge.html">Using connected registry with Azure IoT Edge</a></li> <li><a href="/acr/preview/connected-registry/quickstart-connected-registry-cli.html">Quickstart: Create a connected registry using Azure Container Registry CLI commands</a></li> <li><a href="/acr/preview/connected-registry/quickstart-deploy-connected-registry-iot-edge-cli.html">Quickstart: Deploy a connected registry to an IoT Edge device</a></li> <li><a href="/acr/preview/connected-registry/quickstart-pull-images-from-connected-registry.html">Quickstart: Pull images from a connected registry</a></li></ul> <h2 id="troubleshooting"><a href="#troubleshooting" class="header-anchor">#</a> Troubleshooting</h2> <p>We keep a list of troubleshooting steps for known issues. Those are available on the <a href="/acr/preview/connected-registry/troubleshooting.html">Troubleshooting</a> page.</p> <h2 id="reporting-issues-and-asking-for-help"><a href="#reporting-issues-and-asking-for-help" class="header-anchor">#</a> Reporting Issues and Asking for Help</h2> <p>To report issues, <a href="https://github.com/Azure/acr/issues/new?assignees=toddysm&amp;labels=connected-registry,bug&amp;template=bug_report.md&amp;title=" target="_blank" rel="noopener noreferrer">create a new bug<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> in this repository.</p> <p>If you need help with installation, set up, or use, you can <a href="https://github.com/Azure/acr/issues/new?assignees=toddysm&amp;labels=help%20wanted&amp;template=bug_report.md&amp;title=" target="_blank" rel="noopener noreferrer">submit a help request<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> in this repository.</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/azure/acr/edit/master/docs/preview/connected-registry/README.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/acr/assets/js/app.8af8dec3.js" defer></script><script src="/acr/assets/js/2.f86faad7.js" defer></script><script src="/acr/assets/js/27.69f0c3fe.js" defer></script>
  </body>
</html>
